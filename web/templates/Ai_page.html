<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwasthCard - AI Health Analysis</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='Ai_page.css') }}">
</head>
<body>
    <div class="ai-container">
        <div class="ai-header">
            <div class="ai-icon-wrapper">
                <div class="ai-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                        <line x1="12" y1="22.08" x2="12" y2="12"/>
                    </svg>
                </div>
                </div>
            <div class="ai-title-section">
                <h1>AI Health Analysis</h1>
                <p class="ai-subtitle">Personalized insights for Ayush Kumar</p>
            </div>
            <div class="status-badge" id="statusBadge">
                <span class="status-dot"></span>
                <span class="status-text">Analyzing...</span>
            </div>
        </div>

        <div class="loading-section" id="loadingSection">
            <div class="thinking-animation">
                <div class="brain-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/>
                        <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/>
                    </svg>
                </div>
                <div class="thinking-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <p class="thinking-text" id="thinkingText">Analyzing medical history...</p>
            </div>
        </div>

        <div class="ai-content" id="aiContent" style="display: none;">
            
            <div class="ai-section potential-diseases">
                <div class="section-header-ai">
                    <div class="icon-badge danger">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                            <line x1="12" y1="9" x2="12" y2="13"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                    </div>
                    <h2>Potential Diseases</h2>
                </div>
                <p class="section-description">Based on the patient's medical history and family background, Ayush Kumar may encounter recurrent or escalating conditions like respiratory issues, chronic pain, and metabolic disorders. These stem from frequent viral and allergic episodes in his records.</p>
                <ul class="ai-list">
                    <li>Viral infections and bronchitis exacerbations</li>
                    <li>Asthma attacks or wheezing episodes</li>
                    <li>Migraine flares and arthritis inflammation</li>
                    <li>Allergic reactions leading to rashes or dehydration</li>
                    <li>Potential onset of diabetes or hypertension from paternal lineage</li>
                </ul>
            </div>

            <div class="ai-section genetic-diseases">
                <div class="section-header-ai">
                    <div class="icon-badge genetic">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                            <path d="M2 17l10 5 10-5M2 12l10 5 10-5"/>
                        </svg>
                    </div>
                    <h2>Genetic Diseases</h2>
                </div>
                <p class="section-description">Ayush has inherited predispositions from both sides of his family, including respiratory and autoimmune traits evident in parents, grandparents, and siblings. His listed conditions like asthma and arthritis align with these hereditary patterns.</p>
                <ul class="ai-list">
                    <li>Asthma and allergic reactions (common in maternal grandfather, paternal cousin, and brother)</li>
                    <li>Migraine episodes (seen in mother, maternal grandmother, and maternal cousin)</li>
                    <li>Arthritis (prevalent in paternal grandmother and maternal great-grandmother)</li>
                    <li>Bronchitis susceptibility (from father and maternal grandfather)</li>
                    <li>Risk for thyroid disorders or diabetes (maternal and paternal lines)</li>
                </ul>
            </div>

            <div class="ai-section precautions">
                <div class="section-header-ai">
                    <div class="icon-badge success">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                            <path d="M9 12l2 2 4-4"/>
                        </svg>
                    </div>
                    <h2>Precautions</h2>
                </div>
                <p class="section-description">To manage his conditions, Ayush should prioritize preventive monitoring and lifestyle adjustments, drawing from his history of multiple flare-ups and family risks. Regular check-ups with doctors like Dr. Ivy Martinez can help track progress.</p>
                <ul class="ai-list">
                    <li>Maintain a balanced diet low in processed foods to avoid gastroenteritis triggers</li>
                    <li>Engage in low-impact exercises like swimming to ease arthritis and muscle strain</li>
                    <li>Track symptoms daily via a journal to catch early signs of migraines or asthma</li>
                    <li>Stay hydrated and rest during viral episodes, following Dr. Grace Lee's advice</li>
                    <li>Schedule annual genetic screenings for diabetes and hypertension risks</li>
                </ul>
            </div>

            <div class="ai-section stay-away">
                <div class="section-header-ai">
                    <div class="icon-badge warning">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/>
                        </svg>
                    </div>
                    <h2>Stay Away From</h2>
                </div>
                <p class="section-description">Certain triggers in Ayush's history, such as allergens and environmental factors, can provoke severe reactions. Avoiding these, informed by family allergic patterns, is crucial for his safety.</p>
                <ul class="ai-list">
                    <li>Pollen, dust, or pet dander to prevent wheezing and rashes</li>
                    <li>High-sugar or spicy foods that may induce migraines or dehydration</li>
                    <li>Cold weather or smoke exposure worsening bronchitis and asthma</li>
                    <li>Overexertion during joint pain episodes to avoid arthritis flares</li>
                    <li>Unprescribed medications, given history of mismatched conclusions like anti-inflammatories for non-arthritic issues</li>
                </ul>
            </div>

            <div class="ai-disclaimer">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="12" y1="16" x2="12" y2="12"/>
                    <line x1="12" y1="8" x2="12.01" y2="8"/>
                </svg>
                <p><strong>Disclaimer:</strong> This AI-generated analysis is for informational purposes only and should not replace professional medical advice. Always consult with qualified healthcare providers for diagnosis and treatment.</p>
            </div>
        </div>
    </div>

    <script>
        // Thinking messages rotation
        const thinkingMessages = [
            "Analyzing medical history...",
            "Processing genetic data...",
            "Evaluating family patterns...",
            "Cross-referencing symptoms...",
            "Identifying risk factors...",
            "Generating recommendations...",
            "Finalizing analysis..."
        ];

        let messageIndex = 0;
        let messageInterval;
        const analysisDuration = 6000; // Total analysis time (6 seconds)
        const transitionTime = 500; // Time for the final fade-in (0.5 seconds)

        // Start animation sequence
        window.addEventListener('load', function() {
            const thinkingTextElement = document.getElementById('thinkingText');
            
            // Rotate thinking messages
            messageInterval = setInterval(() => {
                messageIndex = (messageIndex + 1) % thinkingMessages.length;
                thinkingTextElement.textContent = thinkingMessages[messageIndex];
            }, 1000); // Increased rotation speed for a more dynamic feel

            // After analysisDuration, show content
            setTimeout(() => {
                clearInterval(messageInterval);
                document.getElementById('loadingSection').style.display = 'none';
                
                // Update status badge
                const statusBadge = document.getElementById('statusBadge');
                statusBadge.innerHTML = '<span class="status-dot complete"></span><span class="status-text">Analysis Complete</span>';

                // Show content and trigger typing animation
                const aiContent = document.getElementById('aiContent');
                aiContent.style.display = 'block';
                
                animateContent(transitionTime); // Start the sequential fade-in
            }, analysisDuration);
        });

        // Sequential fade-in animation for sections and list items
        function animateContent(delayBeforeStart) {
            const sections = document.querySelectorAll('.ai-section');
            const sectionDelay = 600; // Delay between sections
            const itemDelay = 150; // Delay between list items

            sections.forEach((section, sectionIndex) => {
                // Delay for the section itself
                const totalSectionDelay = delayBeforeStart + sectionIndex * sectionDelay;

                setTimeout(() => {
                    section.classList.add('typing-animation'); // Triggers the CSS fadeInUp for the section
                    
                    // Animate list items one by one *after* the section has started animating
                    const listItems = section.querySelectorAll('.ai-list li');
                    listItems.forEach((item, itemIndex) => {
                        setTimeout(() => {
                            item.classList.add('fade-in-item'); // Triggers the CSS fadeInUp for list items
                        }, itemIndex * itemDelay + 200); // 200ms extra delay to let section container appear first
                    });
                }, totalSectionDelay);
            });
        }
    </script>
</body>
</html>